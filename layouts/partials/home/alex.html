{{ $mainSections := site.Params.mainSections | default (slice "posts") }}
{{ $pages := where site.RegularPages "Type" "in" $mainSections }}
{{ $recent := first 5 $pages }}
{{ $disableImageOptimization := .Site.Params.disableImageOptimization | default false }}
<article class="v0-container">
  <section class="hero">
    <div class="hero-content">
      <h1 class="hero-title">
        {{ .Site.Params.heroTitle | default "Hi, I'm void0ps." }}
      </h1>
      <p class="hero-bio">
        {{ .Site.Params.heroBio | default "一个热爱网络安全的研究员，专注于 Web 渗透、红队行动、免杀对抗。喜欢在数字世界的边缘游走，探索未知的漏洞与防御机制。" }}
      </p>
      <div class="social-links">
        {{ with .Site.Params.Author.links }}
          {{ range . }}
            {{ $link := .link }}
            {{ if $link }}
              <a href="{{ $link }}" class="social-btn" target="_blank" rel="noopener">
                {{ with .icon }}
                  {{ . | title }}
                {{ else }}
                  Link
                {{ end }}
              </a>
            {{ end }}
          {{ end }}
        {{ end }}
      </div>
    </div>
    <div class="hero-avatar-container">
      <div class="avatar-frame">
        <div class="avatar-inner">
          {{ with .Site.Params.Author.image }}
            {{ $authorImage := "" }}
            {{ if or (strings.HasPrefix . "http:") (strings.HasPrefix . "https:") }}
              {{ $authorImage = resources.GetRemote . }}
            {{ else }}
              {{ $authorImage = resources.Get . }}
            {{ end }}
            {{ if $authorImage }}
              {{ if $disableImageOptimization }}
                <img
                  src="{{ $authorImage.RelPermalink }}"
                  alt="{{ .Site.Params.Author.name | default .Site.Title }}"
                  class="hero-avatar-img" />
              {{ else }}
                {{ with $authorImage.Fill "280x280 smart" }}
                  <img
                    src="{{ .RelPermalink }}"
                    width="{{ .Width }}"
                    height="{{ .Height }}"
                    alt="{{ $.Site.Params.Author.name | default $.Site.Title }}"
                    class="hero-avatar-img" />
                {{ end }}
              {{ end }}
            {{ end }}
          {{ end }}
        </div>
      </div>
    </div>
  </section>

  <section class="posts-section">
    <h2 class="section-title">// 最新情报 [Recent_Logs]</h2>
    <div class="posts-grid">
      {{ range $recent }}
        {{ $category := "" }}
        {{ with .Params.categories }}
          {{ $category = index . 0 }}
        {{ end }}
        <article class="post-card">
          <h3 class="post-title">
            <a href="{{ .RelPermalink }}">
              {{ .Title | emojify }}
            </a>
          </h3>
          <div class="post-meta">
            {{ .Date | time.Format "2006-01-02" }}
            {{ with $category }} | #{{ . }}{{ end }}
          </div>
          <p class="post-summary line-clamp-2">
            {{ .Summary | plainify | truncate 120 }}
          </p>
        </article>
      {{ end }}
    </div>
  </section>
</article>
