@import url("https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;600&family=Inter:wght@400;600;800&display=swap");

/* assets/css/custom.css */

/* 强制覆盖深色模式下的背景和主色调 */
:root {
    --color-primary-50: 245, 243, 255;
    --color-primary-100: 237, 233, 254;
    --color-primary-200: 221, 214, 254;
    --color-primary-300: 196, 181, 253;
    --color-primary-400: 167, 139, 252;
    --color-primary-500: 139, 92, 246; /* 核心紫色 */
    --color-primary-600: 124, 58, 237;
    --color-primary-700: 109, 40, 217;
    --color-primary-800: 91, 33, 182;
    --color-primary-900: 76, 29, 149;
    --color-secondary-50: 253, 244, 255;
    --color-secondary-100: 250, 232, 255;
    --color-secondary-200: 245, 208, 254;
    --color-secondary-300: 240, 171, 252;
    --color-secondary-400: 232, 121, 249;
    --color-secondary-500: 217, 70, 239;
    --color-secondary-600: 192, 38, 211;
    --color-secondary-700: 162, 28, 175;
    --color-secondary-800: 134, 25, 143;
    --color-secondary-900: 112, 26, 117;
}

/* 深色模式下的具体颜色定义 */
.dark {
    /* 把默认的深蓝背景改成偏深灰，接近 React 版本的 #1d1e20 */
    --color-neutral-800: 29, 30, 32; /* 页面主背景：#1d1e20 */
    --color-neutral-900: 10, 12, 18; /* 头部/底部背景：略深一点 */
    
    /* 卡片背景：比主体稍亮，接近 #2e3033 */
    --color-neutral-700: 46, 48, 51; 
    
    /* 文字颜色：更亮的灰白，对比度更高 */
    --color-neutral-50: 251, 251, 251;
    --color-neutral-100: 243, 244, 246;
    
    /* 链接和高亮颜色：霓虹紫 */
    --color-secondary-500: 217, 70, 239; /* 霓虹粉紫 */
}

/* 修复打字机特效的光标颜色 */
.Typewriter__cursor {
    color: var(--color-primary-500) !important;
}

/* 让文章卡片有一点点紫色的微光边框（可选，很酷） */
.dark .article-card {
    border: 1px solid rgba(168, 85, 247, 0.2);
}

/* 调整选中文字的背景色 */
::selection {
    background-color: #a855f7;
    color: #fff;
}

html.dark body {
    /* 更接近 React 版本的纯深灰背景 */
    background-color: #1d1e20;
    /* 保留一点右上和左下的淡色光晕，但降低饱和度 */
    background-image:
        radial-gradient(circle at 90% 10%, rgba(15, 23, 42, 0.75), transparent 60%),
        radial-gradient(circle at 0% 80%, rgba(76, 29, 149, 0.35), transparent 55%);
    background-attachment: fixed;
}

html.dark .main-menu {
    /* 顶部导航：居中胶囊 + 轻微玻璃拟态 */
    position: relative;
    max-width: 960px;
    margin-left: auto;
    margin-right: auto;
    margin-top: 1.25rem;
    margin-bottom: 1.75rem;
    padding: 0.35rem 1.5rem;
    border-radius: 9999px;
    background:
        radial-gradient(circle at 0% 0%, rgba(248, 250, 252, 0.03), transparent 55%),
        radial-gradient(circle at 100% 0%, rgba(59, 130, 246, 0.05), transparent 60%),
        rgba(12, 14, 20, 0.98);
    border: 1px solid rgba(148, 163, 184, 0.45);
    box-shadow: 0 22px 60px rgba(0, 0, 0, 0.9);
    backdrop-filter: blur(22px);
}

html.dark .main-menu nav.flex > a {
    display: inline-flex;
    align-items: center;
    gap: 0.55rem;
    padding-inline: 0.45rem;
    padding-block: 0.2rem;
    border-radius: 9999px;
    font-weight: 600;
    letter-spacing: 0.03em;
    text-transform: none;
    color: #f9fafb;
}

html.dark .main-menu nav.flex > a::before {
    content: "";
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 1.75rem;
    height: 1.75rem;
    border-radius: 9999px;
    font-size: 1rem;
    font-weight: 700;
    background:
        radial-gradient(circle at 0% 0%, rgba(252, 211, 77, 0.4), transparent 55%),
        radial-gradient(circle at 100% 100%, rgba(139, 92, 246, 0.85), transparent 60%),
        radial-gradient(circle at 50% 0%, rgba(59, 130, 246, 0.6), transparent 55%);
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.7);
}

html.dark .main-menu nav.flex > a:hover::before {
    transform: translateY(-1px) scale(1.02);
}

html.dark .main-menu > div:nth-child(2) {
    flex: 1;
    justify-content: space-between;
}

html.dark .main-menu nav a {
    font-weight: 600;
    letter-spacing: 0.02em;
    color: #e5e7eb;
}

html.dark .main-menu nav a:hover {
    color: rgb(var(--color-primary-300));
}

html.dark .main-menu a p {
    font-weight: 500;
    letter-spacing: 0.015em;
}

.main-menu p.active {
    color: rgb(var(--color-primary-400));
}

html.dark article.relative.min-h-full.min-w-full.overflow-hidden.rounded.border {
    border-radius: 1.25rem;
    background-color: #2e3033;
    border-color: rgba(88, 28, 135, 0.55);
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.75);
}

html.dark #single_header h1 {
    font-size: 2.25rem;
    line-height: 1.2;
}

html.dark .article-content {
    margin-top: 1.75rem;
    padding: 2.5rem 2.75rem;
    border-radius: 1.75rem;
    background-color: #111827; /* 比代码块略亮，突出代码区域 */
    box-shadow: 0 24px 70px rgba(0, 0, 0, 0.9);
    border: 1px solid rgba(88, 28, 135, 0.55);
}

html.dark .article-content.prose {
    width: 100%;
    max-width: 100%;
}

html.dark .article-content pre {
    border-radius: 1.25rem;
    background-color: #020617; /* 几乎纯黑，让代码块更突出 */
    border: 1px solid rgba(129, 140, 248, 0.8);
    box-shadow: 0 14px 32px rgba(0, 0, 0, 0.9);
}

/* 左侧侧边栏中的打字机简介效果 */
.sidebar-typewriter {
    position: relative;
}

.sidebar-typewriter::after {
    content: "";
    display: inline-block;
    width: 1px;
    height: 1.1em;
    margin-left: 3px;
    background-color: rgb(var(--color-primary-500));
    animation: sidebar-cursor 0.8s steps(2, start) infinite;
}

@keyframes sidebar-cursor {
    0%, 50% { opacity: 1; }
    51%, 100% { opacity: 0; }
}

/* 两行截断，用于首页文章摘要，复刻 React 版本的 line-clamp-2 效果 */
.line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

/* 顶部导航 <-> 左侧导航 布局切换按钮 */
.nav-layout-toggle {
    position: fixed;
    right: 1.75rem;
    bottom: 1.75rem;
    z-index: 40;
    width: 2.5rem;
    height: 2.5rem;
    border-radius: 9999px;
    border: 1px solid rgba(63, 65, 70, 0.9);
    background: radial-gradient(circle at 30% 0%, rgba(168, 85, 247, 0.4), transparent 55%),
                rgba(46, 48, 51, 0.95);
    color: #f9fafb;
    font-size: 1.1rem;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 18px 40px rgba(0, 0, 0, 0.65);
    cursor: pointer;
    transition: transform 0.25s ease, box-shadow 0.25s ease, background 0.25s ease, opacity 0.25s ease;
}

.nav-layout-toggle:hover {
    transform: translateY(-2px) scale(1.02);
    box-shadow: 0 22px 55px rgba(0, 0, 0, 0.8);
}

.nav-layout-toggle:active {
    transform: translateY(0) scale(0.97);
}

/* 左侧侧边栏与顶部导航的飞入/飞出动画（按页面类型自动触发） */
.sidebar-profile,
.main-menu {
    transition: transform 0.75s cubic-bezier(0.16, 1, 0.3, 1),
                opacity 0.45s ease;
}

/* 首页：初始时顶部导航在上方、略缩小，侧边栏隐藏 */
body.layout-home .main-menu {
    transform: translateY(-60px) scale(0.8);
    opacity: 0;
}

body.layout-home .sidebar-profile {
    transform: translateX(-80px) scale(0.75);
    opacity: 0;
    pointer-events: none;
}

/* 首页进入后：顶部导航从上方缩放落下 */
body.layout-home.nav-animate .main-menu {
    transform: translateY(0) scale(1);
    opacity: 1;
}

/* 文章 / 列表页面：初始时顶部导航正常显示，侧边栏在左侧、略缩小 */
body.layout-article .main-menu,
body.layout-list .main-menu {
    transform: translateY(0) scale(1);
    opacity: 1;
}

body.layout-article .sidebar-profile,
body.layout-list .sidebar-profile {
    transform: translate(-40px, -20px) scale(0.8);
    opacity: 0;
}

/* 文章 / 列表页面进入后：顶部导航缩小上移，侧边栏从左侧放大飞入 */
body.layout-article.nav-animate .main-menu,
body.layout-list.nav-animate .main-menu {
    transform: translate(-40px, -110px) scale(0.6);
    opacity: 0;
    pointer-events: none;
}

body.layout-article.nav-animate .sidebar-profile,
body.layout-list.nav-animate .sidebar-profile {
    transform: translate(0, 0) scale(1);
    opacity: 1;
}

html.dark {
    --v0-bg-main: #050508;
    --v0-bg-panel: #0d0d16;
    --v0-accent-purple: #b721ff;
    --v0-accent-purple-glow: rgba(183, 33, 255, 0.6);
    --v0-accent-cyan: #21d4ff;
    --v0-accent-cyan-glow: rgba(33, 212, 255, 0.5);
    --v0-text-primary: #ffffff;
    --v0-text-secondary: #8b8b9e;
    --v0-border-color: #1f1f2e;
    --v0-code-bg: #15151e;
    --v0-font-mono: 'Fira Code', monospace;
    --v0-font-sans: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
}

html.dark body {
    background-color: var(--v0-bg-main);
    background-image:
        linear-gradient(rgba(5, 5, 8, 0.96), rgba(5, 5, 8, 0.96)),
        url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%231f1f2e' fill-opacity='0.2'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    color: var(--v0-text-primary);
    font-family: var(--v0-font-sans);
    line-height: 1.6;
    overflow-x: hidden;
}

html.dark body a {
    text-decoration: none;
    color: inherit;
    transition: all 0.3s ease;
}

html.dark .v0-container {
    max-width: 1100px;
    margin-left: auto;
    margin-right: auto;
    padding-left: 2rem;
    padding-right: 2rem;
}

html.dark .site-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-top: 1.5rem;
    padding-bottom: 1.5rem;
    border-bottom: 1px solid var(--v0-border-color);
    font-family: var(--v0-font-mono);
    margin-bottom: 2rem;
    flex-wrap: wrap;
    gap: 1rem;
}

html.dark .terminal-logo {
    font-weight: 600;
    font-size: 1.2rem;
    color: var(--v0-accent-purple);
}

html.dark .terminal-logo::before {
    content: 'root@blog:~$ ';
    color: var(--v0-accent-cyan);
}

html.dark .nav-links a {
    margin-left: 2rem;
    color: var(--v0-text-secondary);
    position: relative;
}

html.dark .nav-links a:hover {
    color: var(--v0-accent-purple);
}

html.dark .nav-links a::after {
    content: '';
    position: absolute;
    bottom: -5px;
    left: 0;
    width: 0;
    height: 2px;
    background: var(--v0-accent-purple);
    transition: width 0.3s ease;
}

html.dark .nav-links a:hover::after {
    width: 100%;
}

html.dark .hero {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding-top: 4rem;
    padding-bottom: 4rem;
    min-height: 60vh;
}

html.dark .hero-content {
    flex: 1;
    max-width: 600px;
}

html.dark .hero-title {
    font-family: var(--v0-font-mono);
    font-size: 3.5rem;
    font-weight: 800;
    margin-bottom: 1.5rem;
    color: var(--v0-accent-purple);
    text-shadow: 0 0 10px var(--v0-accent-purple-glow);
    white-space: nowrap;
    overflow: hidden;
    border-right: 3px solid var(--v0-accent-cyan);
    width: 0;
    animation: v0-typing 3.5s steps(30, end) forwards, v0-blink-caret 0.75s step-end infinite;
    animation-delay: 1s;
}

@keyframes v0-typing {
    from {
        width: 0;
    }
    to {
        width: 100%;
    }
}

@keyframes v0-blink-caret {
    from,
    to {
        border-color: transparent;
    }
    50% {
        border-color: var(--v0-accent-cyan);
    }
}

html.dark .hero-bio {
    font-size: 1.25rem;
    color: var(--v0-text-secondary);
    margin-bottom: 2.5rem;
}

html.dark .social-links {
    display: flex;
    gap: 1.5rem;
    font-family: var(--v0-font-mono);
}

html.dark .social-btn {
    padding: 0.75rem 1.5rem;
    border: 1px solid var(--v0-border-color);
    background: var(--v0-bg-panel);
    color: var(--v0-accent-cyan);
    border-radius: 4px;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
}

html.dark .social-btn:hover {
    background: var(--v0-accent-purple);
    color: var(--v0-text-primary);
    border-color: var(--v0-accent-purple);
    box-shadow: 0 0 15px var(--v0-accent-purple-glow);
    transform: translateY(-2px);
}

html.dark .hero-avatar-container {
    flex: 0 0 280px;
    margin-left: 4rem;
    position: relative;
}

html.dark .avatar-frame {
    width: 280px;
    height: 280px;
    border-radius: 50%;
    padding: 6px;
    background: conic-gradient(from 0deg, transparent, var(--v0-accent-purple), transparent 40%);
    animation: v0-rotate 4s linear infinite;
    position: relative;
    z-index: 1;
}

@keyframes v0-rotate {
    100% {
        transform: rotate(360deg);
    }
}

html.dark .avatar-inner {
    width: 100%;
    height: 100%;
    background: transparent;
    border-radius: 50%;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    z-index: 2;
    border: none;
}

html.dark .hero-avatar-img {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: cover;
    filter: grayscale(30%) contrast(110%);
}

html.dark .section-title {
    font-family: var(--v0-font-mono);
    font-size: 1.5rem;
    margin-bottom: 2rem;
    display: flex;
    align-items: center;
    color: var(--v0-accent-cyan);
}

html.dark .section-title::after {
    content: '';
    flex: 1;
    height: 1px;
    background: var(--v0-border-color);
    margin-left: 1rem;
}

html.dark .posts-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 2rem;
    padding-bottom: 4rem;
}

html.dark .post-card {
    background: var(--v0-bg-panel);
    border: 1px solid var(--v0-border-color);
    border-radius: 8px;
    padding: 1.5rem;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    cursor: pointer;
}

html.dark .post-card:hover {
    border-color: var(--v0-accent-purple);
    box-shadow: 0 0 20px var(--v0-accent-purple-glow);
    transform: translateY(-5px);
}

html.dark .post-card::before {
    content: 'DATA_MODULE';
    display: block;
    font-family: var(--v0-font-mono);
    font-size: 0.7rem;
    color: var(--v0-text-secondary);
    margin-bottom: 1rem;
    opacity: 0.6;
}

html.dark .post-title {
    font-size: 1.25rem;
    margin-bottom: 0.75rem;
    color: var(--v0-text-primary);
}

html.dark .post-meta {
    font-family: var(--v0-font-mono);
    font-size: 0.85rem;
    color: var(--v0-accent-cyan);
    margin-bottom: 1rem;
}

html.dark .post-summary {
color: var(--v0-text-secondary);
font-size: 0.95rem;
}

@media (max-width: 768px) {
html.dark .hero {
flex-direction: column-reverse;
text-align: center;
padding-top: 3rem;
padding-bottom: 3rem;
}

html.dark .hero-avatar-container {
margin-left: 0;
margin-bottom: 2.5rem;
flex: 0 0 200px;
}

html.dark .avatar-frame {
width: 200px;
height: 200px;
}

html.dark .hero-title {
font-size: 2.5rem;
white-space: normal;
animation: none;
border: none;
width: auto;
}

html.dark .nav-links {
display: none;
}

html.dark .article-layout {
display: block;
}

html.dark .toc-sidebar {
display: none;
}
}

/* Loader overlay */
html.dark .v0-loader-overlay {
position: fixed;
inset: 0;
background-color: #000;
z-index: 9999;
display: flex;
flex-direction: column;
justify-content: center;
align-items: center;
font-family: var(--v0-font-mono);
padding: 2rem;
}

html.dark .v0-loader-overlay .loader-content {
width: 100%;
max-width: 600px;
}

html.dark .terminal-boot-log {
height: 150px;
overflow: hidden;
color: var(--v0-text-secondary);
font-size: 0.8rem;
margin-bottom: 2rem;
border-left: 2px solid var(--v0-accent-cyan);
padding-left: 1rem;
opacity: 0.8;
display: flex;
flex-direction: column;
justify-content: flex-end;
font-family: 'Fira Code', monospace;
}

html.dark .log-line {
margin-bottom: 2px;
text-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
}

html.dark .log-success {
color: #27c93f;
}

html.dark .log-warn {
color: #ffbd2e;
}

html.dark .progress-wrapper {
margin-bottom: 1rem;
position: relative;
}

html.dark .progress-label {
display: flex;
justify-content: space-between;
color: var(--v0-accent-purple);
font-size: 0.9rem;
margin-bottom: 0.8rem;
font-weight: bold;
text-transform: uppercase;
letter-spacing: 2px;
}

html.dark .progress-bar-bg {
width: 100%;
height: 20px;
background: transparent;
display: flex;
gap: 4px;
align-items: center;
}

html.dark .progress-block {
flex: 1;
height: 100%;
background: #1a1a24;
border: 1px solid #2a2a35;
transition: all 0.05s ease;
}

html.dark .progress-block.active {
background: var(--v0-accent-purple);
border-color: #d98aff;
box-shadow: 0 0 10px var(--v0-accent-purple-glow);
}

html.dark .access-granted {
position: absolute;
top: 50%;
left: 50%;
transform: translate(-50%, -50%);
color: var(--v0-accent-cyan);
font-size: 2rem;
font-weight: 800;
border: 2px solid var(--v0-accent-cyan);
padding: 1rem 2rem;
letter-spacing: 4px;
background: rgba(0, 0, 0, 0.9);
display: none;
animation: v0-blink-text 0.1s infinite;
box-shadow: 0 0 40px var(--v0-accent-cyan-glow);
z-index: 10;
white-space: nowrap;
backdrop-filter: blur(4px);
}

@keyframes v0-blink-text {
0%,
100% {
opacity: 1;
}
50% {
opacity: 0.8;
}
}

/* Article layout & TOC */
html.dark .article-layout {
display: grid;
grid-template-columns: minmax(0, 1fr) 250px;
gap: 4rem;
position: relative;
}

html.dark .article-header {
margin-bottom: 3rem;
border-bottom: 1px solid var(--v0-border-color);
padding-bottom: 2rem;
}

html.dark .article-meta-row {
display: flex;
gap: 1.5rem;
font-family: var(--v0-font-mono);
font-size: 0.85rem;
color: var(--v0-accent-cyan);
margin-bottom: 1rem;
}

html.dark .article-main-title {
font-size: 2.5rem;
font-weight: 800;
line-height: 1.2;
margin-bottom: 1.5rem;
background: linear-gradient(90deg, #ffffff, #a0a0a0);
background-clip: text;
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
}

html.dark .article-content {
font-size: 1.05rem;
color: #d1d1d6;
line-height: 1.8;
}

html.dark .article-content h2 {
font-family: var(--v0-font-mono);
font-size: 1.5rem;
color: var(--v0-accent-purple);
margin: 3rem 0 1.5rem;
padding-bottom: 0.5rem;
border-bottom: 1px dashed var(--v0-border-color);
display: flex;
align-items: center;
}

html.dark .article-content h2::before {
content: '## ';
color: var(--v0-text-secondary);
margin-right: 0.5rem;
opacity: 0.5;
}

html.dark .toc-sidebar {
position: sticky;
top: 2rem;
height: fit-content;
}

html.dark .toc-container {
border-left: 2px solid var(--v0-border-color);
padding-left: 1.5rem;
}

html.dark .toc-title {
font-family: var(--v0-font-mono);
font-size: 0.9rem;
color: var(--v0-text-secondary);
text-transform: uppercase;
letter-spacing: 1px;
margin-bottom: 1rem;
font-weight: 600;
}

html.dark .toc-sidebar #TableOfContents ul {
list-style: none;
padding-left: 0;
}

html.dark .toc-sidebar #TableOfContents li {
margin-bottom: 0.8rem;
}

html.dark .toc-sidebar #TableOfContents a {
font-size: 0.9rem;
color: var(--v0-text-secondary);
display: block;
transition: all 0.3s ease;
}

html.dark .toc-sidebar #TableOfContents a:hover {
color: var(--v0-accent-cyan);
transform: translateX(5px);
}

html.dark .v0-article-tags-row {
display: flex;
gap: 0.5rem;
}

html.dark .v0-article-tag {
background: #1f1f2e;
padding: 2px 8px;
border-radius: 4px;
font-size: 0.8rem;
font-family: var(--v0-font-mono);
color: var(--v0-accent-purple);
}