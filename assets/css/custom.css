/* assets/css/custom.css */

/* 强制覆盖深色模式下的背景和主色调 */
:root {
    --color-primary-50: 245, 243, 255;
    --color-primary-100: 237, 233, 254;
    --color-primary-200: 221, 214, 254;
    --color-primary-300: 196, 181, 253;
    --color-primary-400: 167, 139, 252;
    --color-primary-500: 139, 92, 246; /* 核心紫色 */
    --color-primary-600: 124, 58, 237;
    --color-primary-700: 109, 40, 217;
    --color-primary-800: 91, 33, 182;
    --color-primary-900: 76, 29, 149;
    --color-secondary-50: 253, 244, 255;
    --color-secondary-100: 250, 232, 255;
    --color-secondary-200: 245, 208, 254;
    --color-secondary-300: 240, 171, 252;
    --color-secondary-400: 232, 121, 249;
    --color-secondary-500: 217, 70, 239;
    --color-secondary-600: 192, 38, 211;
    --color-secondary-700: 162, 28, 175;
    --color-secondary-800: 134, 25, 143;
    --color-secondary-900: 112, 26, 117;
}

/* 深色模式下的具体颜色定义 */
.dark {
    /* 把默认的深蓝背景改成偏深灰，接近 React 版本的 #1d1e20 */
    --color-neutral-800: 29, 30, 32; /* 页面主背景：#1d1e20 */
    --color-neutral-900: 10, 12, 18; /* 头部/底部背景：略深一点 */
    
    /* 卡片背景：比主体稍亮，接近 #2e3033 */
    --color-neutral-700: 46, 48, 51; 
    
    /* 文字颜色：更亮的灰白，对比度更高 */
    --color-neutral-50: 251, 251, 251;
    --color-neutral-100: 243, 244, 246;
    
    /* 链接和高亮颜色：霓虹紫 */
    --color-secondary-500: 217, 70, 239; /* 霓虹粉紫 */
}

/* 修复打字机特效的光标颜色 */
.Typewriter__cursor {
    color: var(--color-primary-500) !important;
}

/* 让文章卡片有一点点紫色的微光边框（可选，很酷） */
.dark .article-card {
    border: 1px solid rgba(168, 85, 247, 0.2);
}

/* 调整选中文字的背景色 */
::selection {
    background-color: #a855f7;
    color: #fff;
}

html.dark body {
    /* 更接近 React 版本的纯深灰背景 */
    background-color: #1d1e20;
    /* 保留一点右上和左下的淡色光晕，但降低饱和度 */
    background-image:
        radial-gradient(circle at 90% 10%, rgba(15, 23, 42, 0.75), transparent 60%),
        radial-gradient(circle at 0% 80%, rgba(76, 29, 149, 0.35), transparent 55%);
    background-attachment: fixed;
}

html.dark .main-menu {
    /* 顶部导航：居中胶囊 + 轻微玻璃拟态 */
    position: relative;
    max-width: 960px;
    margin-left: auto;
    margin-right: auto;
    margin-top: 1.25rem;
    margin-bottom: 1.75rem;
    padding: 0.35rem 1.5rem;
    border-radius: 9999px;
    background:
        radial-gradient(circle at 0% 0%, rgba(248, 250, 252, 0.03), transparent 55%),
        radial-gradient(circle at 100% 0%, rgba(59, 130, 246, 0.05), transparent 60%),
        rgba(12, 14, 20, 0.98);
    border: 1px solid rgba(148, 163, 184, 0.45);
    box-shadow: 0 22px 60px rgba(0, 0, 0, 0.9);
    backdrop-filter: blur(22px);
}

html.dark .main-menu nav.flex > a {
    display: inline-flex;
    align-items: center;
    gap: 0.55rem;
    padding-inline: 0.45rem;
    padding-block: 0.2rem;
    border-radius: 9999px;
    font-weight: 600;
    letter-spacing: 0.03em;
    text-transform: none;
    color: #f9fafb;
}

html.dark .main-menu nav.flex > a::before {
    content: "";
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 1.75rem;
    height: 1.75rem;
    border-radius: 9999px;
    font-size: 1rem;
    font-weight: 700;
    background:
        radial-gradient(circle at 0% 0%, rgba(252, 211, 77, 0.4), transparent 55%),
        radial-gradient(circle at 100% 100%, rgba(139, 92, 246, 0.85), transparent 60%),
        radial-gradient(circle at 50% 0%, rgba(59, 130, 246, 0.6), transparent 55%);
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.7);
}

html.dark .main-menu nav.flex > a:hover::before {
    transform: translateY(-1px) scale(1.02);
}

html.dark .main-menu > div:nth-child(2) {
    flex: 1;
    justify-content: space-between;
}

html.dark .main-menu nav a {
    font-weight: 600;
    letter-spacing: 0.02em;
    color: #e5e7eb;
}

html.dark .main-menu nav a:hover {
    color: rgb(var(--color-primary-300));
}

html.dark .main-menu a p {
    font-weight: 500;
    letter-spacing: 0.015em;
}

.main-menu p.active {
    color: rgb(var(--color-primary-400));
}

html.dark article.relative.min-h-full.min-w-full.overflow-hidden.rounded.border {
    border-radius: 1.25rem;
    background-color: #2e3033;
    border-color: rgba(88, 28, 135, 0.55);
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.75);
}

html.dark #single_header h1 {
    font-size: 2.25rem;
    line-height: 1.2;
}

html.dark .article-content {
    margin-top: 1.75rem;
    padding: 2.5rem 2.75rem;
    border-radius: 1.75rem;
    background-color: #2e3033;
    box-shadow: 0 24px 70px rgba(0, 0, 0, 0.9);
    border: 1px solid rgba(88, 28, 135, 0.55);
}

html.dark .article-content pre {
    border-radius: 1.25rem;
}

/* 左侧侧边栏中的打字机简介效果 */
.sidebar-typewriter {
    position: relative;
}

.sidebar-typewriter::after {
    content: "";
    display: inline-block;
    width: 1px;
    height: 1.1em;
    margin-left: 3px;
    background-color: rgb(var(--color-primary-500));
    animation: sidebar-cursor 0.8s steps(2, start) infinite;
}

@keyframes sidebar-cursor {
    0%, 50% { opacity: 1; }
    51%, 100% { opacity: 0; }
}

/* 两行截断，用于首页文章摘要，复刻 React 版本的 line-clamp-2 效果 */
.line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

/* 顶部导航 <-> 左侧导航 布局切换按钮 */
.nav-layout-toggle {
    position: fixed;
    right: 1.75rem;
    bottom: 1.75rem;
    z-index: 40;
    width: 2.5rem;
    height: 2.5rem;
    border-radius: 9999px;
    border: 1px solid rgba(63, 65, 70, 0.9);
    background: radial-gradient(circle at 30% 0%, rgba(168, 85, 247, 0.4), transparent 55%),
                rgba(46, 48, 51, 0.95);
    color: #f9fafb;
    font-size: 1.1rem;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 18px 40px rgba(0, 0, 0, 0.65);
    cursor: pointer;
    transition: transform 0.25s ease, box-shadow 0.25s ease, background 0.25s ease, opacity 0.25s ease;
}

.nav-layout-toggle:hover {
    transform: translateY(-2px) scale(1.02);
    box-shadow: 0 22px 55px rgba(0, 0, 0, 0.8);
}

.nav-layout-toggle:active {
    transform: translateY(0) scale(0.97);
}

/* 左侧侧边栏与顶部导航的飞入/飞出动画（按页面类型自动触发） */
.sidebar-profile,
.main-menu {
    transition: transform 0.75s cubic-bezier(0.16, 1, 0.3, 1),
                opacity 0.45s ease;
}

/* 首页：初始时顶部导航在上方、略缩小，侧边栏隐藏 */
body.layout-home .main-menu {
    transform: translateY(-60px) scale(0.8);
    opacity: 0;
}

body.layout-home .sidebar-profile {
    transform: translateX(-80px) scale(0.75);
    opacity: 0;
    pointer-events: none;
}

/* 首页进入后：顶部导航从上方缩放落下 */
body.layout-home.nav-animate .main-menu {
    transform: translateY(0) scale(1);
    opacity: 1;
}

/* 文章 / 列表页面：初始时顶部导航正常显示，侧边栏在左侧、略缩小 */
body.layout-article .main-menu,
body.layout-list .main-menu {
    transform: translateY(0) scale(1);
    opacity: 1;
}

body.layout-article .sidebar-profile,
body.layout-list .sidebar-profile {
    transform: translate(-90px, -30px) scale(0.7);
    opacity: 0;
}

/* 文章 / 列表页面进入后：顶部导航缩小上移，侧边栏从左侧放大飞入 */
body.layout-article.nav-animate .main-menu,
body.layout-list.nav-animate .main-menu {
    transform: translate(-40px, -110px) scale(0.6);
    opacity: 0;
    pointer-events: none;
}

body.layout-article.nav-animate .sidebar-profile,
body.layout-list.nav-animate .sidebar-profile {
    transform: translate(0, 0) scale(1.02);
    opacity: 1;
}